{"ast":null,"code":"import _slicedToArray from \"/Users/lairdkruger/Documents/Web Development/Work/inst19-20/Sites/INST19/INST19/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/lairdkruger/Documents/Web Development/Work/inst19-20/Sites/INST19/INST19/src/components/objects/Lightbar.js\";\nimport React, { useRef, useState } from 'react';\nimport { useThree, useFrame } from 'react-three-fiber';\nimport lerp from 'lerp';\nimport '../materials/LightbarMaterial';\n\nfunction Lightbar(props) {\n  const bar = useRef();\n  const material = useRef();\n\n  const _useThree = useThree(),\n        viewport = _useThree.viewport;\n\n  const minWidth = -viewport.width / 1.75,\n        maxWidth = viewport.width / 1.75;\n  const minInterval = 300,\n        maxInterval = 5000;\n  const zPos = 1 / props.bar.width * 100;\n\n  const _useState = useState(false),\n        _useState2 = _slicedToArray(_useState, 2),\n        hovered = _useState2[0],\n        setHovered = _useState2[1];\n\n  let xPos = 0;\n  let alpha = 0; // returns random float between lower and upper bounds\n\n  function random(lowerBound, upperBound) {\n    return lowerBound + Math.random() * (upperBound + 1 - lowerBound);\n  } // random position for each bar at random intervals\n\n\n  function doSomething() {\n    xPos = random(minWidth, maxWidth);\n    alpha = Math.random() / 5;\n  }\n\n  ;\n\n  (function loop() {\n    setTimeout(function () {\n      doSomething();\n      loop();\n    }, random(minInterval, maxInterval));\n  })(); // lerp bar to its new position\n\n\n  useFrame(() => {\n    bar.current.position.x = lerp(bar.current.position.x, xPos, 0.01);\n\n    if (hovered) {\n      material.current.uOpacity = 1.0;\n    } else {\n      material.current.uOpacity = lerp(material.current.uOpacity, alpha, 0.01);\n    }\n  });\n  return /*#__PURE__*/React.createElement(\"mesh\", {\n    ref: bar,\n    onPointerOver: e => setHovered(true),\n    onPointerOut: e => setHovered(false),\n    position: [0, 0, zPos],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"planeBufferGeometry\", {\n    attach: \"geometry\",\n    args: [props.bar.width, props.bar.height],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"lightbarMaterial\", {\n    ref: material,\n    attach: \"material\",\n    uColor: props.bar.color,\n    transparent: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 13\n    }\n  }));\n}\n\nexport default Lightbar;","map":{"version":3,"sources":["/Users/lairdkruger/Documents/Web Development/Work/inst19-20/Sites/INST19/INST19/src/components/objects/Lightbar.js"],"names":["React","useRef","useState","useThree","useFrame","lerp","Lightbar","props","bar","material","viewport","minWidth","width","maxWidth","minInterval","maxInterval","zPos","hovered","setHovered","xPos","alpha","random","lowerBound","upperBound","Math","doSomething","loop","setTimeout","current","position","x","uOpacity","e","height","color"],"mappings":"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","sourcesContent":["import React, {useRef, useState} from 'react'\nimport {useThree, useFrame} from 'react-three-fiber'\nimport lerp from 'lerp'\n\nimport '../materials/LightbarMaterial'\n\nfunction Lightbar(props) {\n    const bar = useRef()\n    const material = useRef()\n\n    const {viewport} = useThree()\n    const [minWidth, maxWidth] = [-viewport.width / 1.75, viewport.width / 1.75]\n    const [minInterval, maxInterval] = [300, 5000]\n\n    const zPos = (1 / props.bar.width) * 100\n\n    const [hovered, setHovered] = useState(false)\n\n    let xPos = 0\n    let alpha = 0\n\n    // returns random float between lower and upper bounds\n    function random(lowerBound, upperBound) {\n        return lowerBound + Math.random() * (upperBound + 1 - lowerBound)\n    }\n\n    // random position for each bar at random intervals\n    function doSomething() {\n        xPos = random(minWidth, maxWidth)\n        alpha = Math.random() / 5\n    }\n\n    ;(function loop() {\n        setTimeout(function () {\n            doSomething()\n            loop()\n        }, random(minInterval, maxInterval))\n    })()\n\n    // lerp bar to its new position\n    useFrame(() => {\n        bar.current.position.x = lerp(bar.current.position.x, xPos, 0.01)\n        if (hovered) {\n            material.current.uOpacity = 1.0\n        } else {\n            material.current.uOpacity = lerp(material.current.uOpacity, alpha, 0.01)\n        }\n    })\n\n    return (\n        <mesh\n            ref={bar}\n            onPointerOver={(e) => setHovered(true)}\n            onPointerOut={(e) => setHovered(false)}\n            position={[0, 0, zPos]}\n        >\n            <planeBufferGeometry\n                attach=\"geometry\"\n                args={[props.bar.width, props.bar.height]}\n            />\n            <lightbarMaterial\n                ref={material}\n                attach=\"material\"\n                uColor={props.bar.color}\n                transparent={true}\n            />\n        </mesh>\n    )\n}\n\nexport default Lightbar\n"]},"metadata":{},"sourceType":"module"}